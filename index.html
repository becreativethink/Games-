<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LEXON ‚Äî Word Duel</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Rajdhani:wght@400;500;600&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#080c14;--surface:rgba(255,255,255,0.04);--border:rgba(0,230,255,0.15);
  --glow:#00e6ff;--glow2:#7b2fff;--green:#00e676;--yellow:#ffea00;--red:#ff1744;
  --text:#e0eaff;--dim:#556080;--r:14px;
  --fh:'Orbitron',monospace;--fb:'Rajdhani',sans-serif;
  --tile:clamp(38px,8vw,54px);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:var(--fb);font-size:16px;min-height:100vh;overflow-x:hidden}
body::before{content:"";position:fixed;inset:0;z-index:0;
  background-image:linear-gradient(rgba(0,230,255,.025) 1px,transparent 1px),linear-gradient(90deg,rgba(0,230,255,.025) 1px,transparent 1px);
  background-size:40px 40px;pointer-events:none}
body::after{content:"";position:fixed;top:-30%;left:-20%;width:70vw;height:70vw;border-radius:50%;
  background:radial-gradient(circle,rgba(123,47,255,.07) 0%,transparent 70%);
  pointer-events:none;z-index:0;animation:blobF 14s ease-in-out infinite alternate}
@keyframes blobF{to{transform:translate(10%,8%) scale(1.06)}}
#app{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
.view{display:none;width:100%;max-width:620px;animation:fadeUp .4s ease both}
.view.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(22px)}to{opacity:1;transform:translateY(0)}}
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:36px 32px;
  backdrop-filter:blur(20px);box-shadow:0 0 0 1px rgba(0,230,255,.04),0 28px 60px rgba(0,0,0,.55),inset 0 1px 0 rgba(255,255,255,.06);
  position:relative;overflow:hidden}
.card::before{content:"";position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--glow),transparent);opacity:.5}
.logo{font-family:var(--fh);font-size:clamp(1.6rem,5vw,2.4rem);font-weight:800;letter-spacing:.08em;
  background:linear-gradient(135deg,var(--glow),var(--glow2));-webkit-background-clip:text;
  -webkit-text-fill-color:transparent;background-clip:text;text-align:center;margin-bottom:4px}
.logo-sub{text-align:center;color:var(--dim);font-size:.8rem;letter-spacing:.2em;text-transform:uppercase;margin-bottom:32px}
.stitle{font-family:var(--fh);font-size:.78rem;color:var(--glow);letter-spacing:.15em;text-transform:uppercase;
  margin-bottom:18px;display:flex;align-items:center;gap:10px}
.stitle::after{content:"";flex:1;height:1px;background:linear-gradient(90deg,var(--border),transparent)}
.fg{margin-bottom:14px}
label{display:block;font-size:.72rem;letter-spacing:.15em;text-transform:uppercase;color:var(--dim);margin-bottom:5px}
input[type=text],input[type=password],input[type=number]{
  width:100%;background:rgba(0,0,0,.3);border:1px solid var(--border);border-radius:8px;
  padding:11px 15px;color:var(--text);font-family:var(--fb);font-size:1rem;letter-spacing:.04em;
  outline:none;transition:border-color .2s,box-shadow .2s}
input:focus{border-color:var(--glow);box-shadow:0 0 0 3px rgba(0,230,255,.1)}
input::placeholder{color:var(--dim)}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:7px;padding:11px 22px;
  border:1px solid transparent;border-radius:8px;font-family:var(--fh);font-size:.72rem;font-weight:600;
  letter-spacing:.12em;text-transform:uppercase;cursor:pointer;transition:all .2s;outline:none;white-space:nowrap}
.btn-p{background:linear-gradient(135deg,var(--glow),var(--glow2));color:#080c14;box-shadow:0 4px 20px rgba(0,230,255,.22)}
.btn-p:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,230,255,.38)}
.btn-p:active{transform:scale(.97)}
.btn-s{background:transparent;color:var(--glow);border-color:var(--border)}
.btn-s:hover{border-color:var(--glow);background:rgba(0,230,255,.06)}
.btn-g{background:transparent;color:var(--dim);border-color:transparent;font-size:.68rem}
.btn-g:hover{color:var(--text)}
.btn-acc{background:rgba(0,230,118,.13);color:var(--green);border-color:rgba(0,230,118,.28)}
.btn-acc:hover{background:rgba(0,230,118,.22)}
.btn-dec{background:rgba(255,23,68,.09);color:var(--red);border-color:rgba(255,23,68,.22)}
.btn-dec:hover{background:rgba(255,23,68,.18)}
.btn-full{width:100%}
.brow{display:flex;gap:10px;margin-top:18px;flex-wrap:wrap}
.mhdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px;flex-wrap:wrap;gap:10px}
.ubadge{display:inline-flex;align-items:center;gap:8px;background:rgba(0,230,255,.07);
  border:1px solid var(--border);border-radius:20px;padding:5px 13px;font-size:.82rem}
.dot{width:8px;height:8px;border-radius:50%;background:var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.35}}
.mgrid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:22px}
.mcard{background:rgba(0,0,0,.2);border:1px solid var(--border);border-radius:12px;
  padding:26px 18px;text-align:center;cursor:pointer;transition:all .25s}
.mcard:hover{border-color:var(--glow);background:rgba(0,230,255,.05);transform:translateY(-3px);box-shadow:0 12px 28px rgba(0,230,255,.13)}
.mcard:active{transform:scale(.97)}
.micon{font-size:2.1rem;display:block;margin-bottom:9px}
.mlabel{font-family:var(--fh);font-size:.76rem;letter-spacing:.12em;text-transform:uppercase}
.mdesc{font-size:.75rem;color:var(--dim);margin-top:5px}
.inv-card{background:rgba(0,0,0,.22);border:1px solid rgba(123,47,255,.28);border-radius:10px;
  padding:14px;margin-bottom:10px;display:flex;flex-direction:column;gap:7px}
.inv-from{font-size:.92rem}
.inv-meta{font-size:.76rem;color:var(--dim)}
.inv-acts{display:flex;gap:8px}
.no-inv{color:var(--dim);font-size:.82rem;text-align:center;padding:12px}
.ghdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;flex-wrap:wrap;gap:9px}
.gmeta{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.gid{font-family:var(--fh);font-size:.66rem;color:var(--dim);letter-spacing:.15em}
.gvs{font-size:.88rem}
.gatt{font-size:.8rem;color:var(--yellow);font-family:var(--fh)}
.sbadge{font-family:var(--fh);font-size:.63rem;letter-spacing:.15em;padding:4px 11px;border-radius:20px;text-transform:uppercase}
.s-waiting{background:rgba(255,234,0,.1);color:var(--yellow);border:1px solid rgba(255,234,0,.28)}
.s-playing{background:rgba(0,230,255,.08);color:var(--glow);border:1px solid var(--border)}
.s-completed{background:rgba(0,230,118,.09);color:var(--green);border:1px solid rgba(0,230,118,.28)}
#p1-hint{gap:10px;align-items:center;background:rgba(123,47,255,.09);border:1px solid rgba(123,47,255,.26);
  border-radius:8px;padding:9px 14px;margin-bottom:14px;font-size:.82rem;color:var(--dim)}
.wrev{font-family:var(--fh);letter-spacing:.18em;color:var(--glow2);font-size:.98rem}
#guess-grid,#off-grid{display:flex;flex-direction:column;align-items:center;gap:7px;margin:18px 0}
.grow{display:flex;gap:6px}
.tile{width:var(--tile);height:var(--tile);display:flex;align-items:center;justify-content:center;
  font-family:var(--fh);font-size:clamp(.85rem,3vw,1.15rem);font-weight:800;
  border-radius:6px;border:2px solid var(--border);background:rgba(0,0,0,.3);color:var(--text);user-select:none}
.t-empty{border-color:rgba(255,255,255,.07)}
.tile-rev{animation:flip .5s ease both}
@keyframes flip{0%{transform:rotateX(0);opacity:.5}49%{transform:rotateX(90deg);opacity:0}51%{transform:rotateX(-90deg)}100%{transform:rotateX(0);opacity:1}}
.t-green{background:rgba(0,230,118,.18);border-color:var(--green);color:var(--green);box-shadow:0 0 14px rgba(0,230,118,.22)}
.t-yellow{background:rgba(255,234,0,.13);border-color:var(--yellow);color:var(--yellow);box-shadow:0 0 12px rgba(255,234,0,.18)}
.t-red{background:rgba(255,23,68,.11);border-color:var(--red);color:var(--red);box-shadow:0 0 10px rgba(255,23,68,.14)}
.irow{display:flex;gap:9px;margin-top:14px}
.irow input{flex:1;font-family:var(--fh);letter-spacing:.2em;text-transform:uppercase;font-size:1.05rem;text-align:center}
.kb-wrap{margin-top:18px;display:flex;flex-direction:column;align-items:center;gap:5px}
.kb-row{display:flex;gap:4px;flex-wrap:wrap;justify-content:center}
.kb-key{background:rgba(255,255,255,.055);border:1px solid var(--border);border-radius:6px;color:var(--text);
  font-family:var(--fh);font-size:.62rem;font-weight:600;padding:9px 8px;min-width:32px;
  cursor:pointer;transition:all .14s}
.kb-key:hover{background:rgba(0,230,255,.1);border-color:var(--glow)}
.kb-key:active{transform:scale(.91)}
#p1-wait{display:none;text-align:center;color:var(--dim);font-size:.88rem;padding:14px;
  border:1px dashed var(--border);border-radius:10px;animation:blink 2.2s ease-in-out infinite}
@keyframes blink{0%,100%{opacity:.55}50%{opacity:1}}
#end-ov{position:absolute;inset:0;background:rgba(8,12,20,.93);backdrop-filter:blur(14px);
  border-radius:var(--r);display:none;flex-direction:column;align-items:center;justify-content:center;
  gap:14px;z-index:10;text-align:center;padding:24px}
#end-icon{font-size:3.8rem;animation:pop .65s cubic-bezier(.34,1.56,.64,1) both}
@keyframes pop{from{transform:scale(0)}to{transform:scale(1)}}
#end-title{font-family:var(--fh);font-size:1.9rem;background:linear-gradient(135deg,var(--glow),var(--glow2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
#end-msg{font-size:.95rem;color:var(--dim)}
#end-word{font-family:var(--fh);font-size:1.4rem;color:var(--glow);letter-spacing:.25em}
#end-winner{font-family:var(--fh);font-size:.78rem;color:var(--dim);letter-spacing:.12em}
.legend{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;font-size:.75rem;color:var(--dim);margin:8px 0}
.legend span{display:flex;align-items:center;gap:5px}
.ld{width:10px;height:10px;border-radius:2px;display:inline-block}
.ld-g{background:var(--green)}.ld-y{background:var(--yellow)}.ld-r{background:var(--red)}
#hist-grid{display:grid;grid-template-columns:1fr 1fr;gap:11px;margin-top:14px}
.hcard{background:rgba(0,0,0,.22);border:1px solid var(--border);border-radius:10px;padding:13px;
  display:flex;flex-direction:column;gap:5px;transition:border-color .2s}
.hcard:hover{border-color:rgba(0,230,255,.28)}
.hctop{display:flex;justify-content:space-between;align-items:center}
.hcid{font-family:var(--fh);font-size:.62rem;color:var(--dim)}
.hcb{font-size:.62rem;padding:2px 8px;border-radius:10px}
.hcb.waiting{background:rgba(255,234,0,.09);color:var(--yellow)}
.hcb.playing{background:rgba(0,230,255,.09);color:var(--glow)}
.hcb.completed{background:rgba(0,230,118,.09);color:var(--green)}
.hcvs{font-size:.83rem}
.hcmeta{display:flex;flex-wrap:wrap;gap:5px;font-size:.75rem;color:var(--dim)}
.hcres.win{color:var(--green)}.hcres.lose{color:var(--red)}
.toast{position:fixed;bottom:22px;right:22px;z-index:9999;background:rgba(13,20,34,.96);
  border:1px solid var(--border);border-radius:10px;padding:11px 18px;font-size:.88rem;color:var(--text);
  backdrop-filter:blur(20px);box-shadow:0 8px 28px rgba(0,0,0,.5);
  transform:translateY(18px);opacity:0;transition:all .3s;max-width:280px;pointer-events:none}
.toast.show{transform:translateY(0);opacity:1}
.toast.ok{border-color:rgba(0,230,118,.38);color:var(--green)}
.toast.err{border-color:rgba(255,23,68,.38);color:var(--red)}
.toast.info{border-color:rgba(0,230,255,.28);color:var(--glow)}
.spin{width:38px;height:38px;border:3px solid var(--border);border-top-color:var(--glow);
  border-radius:50%;animation:sp .8s linear infinite;margin:38px auto}
@keyframes sp{to{transform:rotate(360deg)}}
.fb{display:flex;align-items:center;justify-content:space-between}
hr.div{border:none;height:1px;background:linear-gradient(90deg,transparent,var(--border),transparent);margin:22px 0}
.no-data{text-align:center;color:var(--dim);padding:36px;font-size:.88rem;grid-column:1/-1}
.lgrid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
.chip{display:inline-flex;align-items:center;gap:5px;background:rgba(0,230,118,.08);
  border:1px solid rgba(0,230,118,.2);border-radius:20px;padding:3px 10px;font-size:.7rem;color:var(--green)}
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:10px}
@media(max-width:500px){
  .card{padding:22px 16px}.mgrid,.lgrid{grid-template-columns:1fr}
  .irow{flex-direction:column}.ghdr{flex-direction:column;align-items:flex-start}
  #hist-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div id="app">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="v-login" class="view">
    <div class="card">
      <div class="logo">LEXON</div>
      <div class="logo-sub">Multiplayer Word Duel</div>
      <div class="fg">
        <label for="a-user">Username</label>
        <input id="a-user" type="text" placeholder="Enter your username" autocomplete="username"/>
      </div>
      <div class="fg">
        <label for="a-pass">Password</label>
        <input id="a-pass" type="password" placeholder="Enter your password" autocomplete="current-password"/>
      </div>
      <div class="brow">
        <button id="btn-login" class="btn btn-p btn-full">‚ö° Login</button>
        <button id="btn-reg"   class="btn btn-s btn-full">‚ú¶ Register</button>
      </div>
      <p style="text-align:center;margin-top:14px;font-size:.72rem;color:var(--dim)">
        Accounts saved in your browser. Online play synced via Firebase.
      </p>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODE SELECT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="v-mode" class="view">
    <div class="card">
      <div class="mhdr">
        <div class="logo" style="font-size:1.35rem;margin-bottom:0">LEXON</div>
        <div style="display:flex;align-items:center;gap:9px;flex-wrap:wrap">
          <div class="ubadge"><span class="dot"></span><span id="mode-uname">Player</span></div>
          <button id="btn-logout" class="btn btn-g">‚Ü© Logout</button>
        </div>
      </div>
      <div class="stitle">Select Mode</div>
      <div class="mgrid">
        <div class="mcard" id="btn-online">
          <span class="micon">üåê</span>
          <div class="mlabel">Online</div>
          <div class="mdesc">Real-time vs friend</div>
        </div>
        <div class="mcard" id="btn-offline">
          <span class="micon">üîå</span>
          <div class="mlabel">Offline</div>
          <div class="mdesc">Pass &amp; play locally</div>
        </div>
      </div>
      <button id="btn-hist" class="btn btn-g" style="display:block;margin:0 auto">üìã Game History</button>
      <hr class="div"/>
      <div class="stitle">Pending Invites</div>
      <div id="inv-list"><p class="no-inv">Checking for invites‚Ä¶</p></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ONLINE LOBBY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="v-lobby" class="view">
    <div class="card">
      <div class="fb" style="margin-bottom:22px">
        <div class="logo" style="font-size:1.28rem;margin-bottom:0">Create Game</div>
        <button id="back-lobby" class="btn btn-g">‚Üê Back</button>
      </div>
      <div class="stitle">Game Setup</div>
      <div class="fg">
        <label>Secret Word</label>
        <input id="c-word" type="text" placeholder="e.g. CLOUD" maxlength="10"
          style="text-transform:uppercase;letter-spacing:.2em"/>
      </div>
      <div class="lgrid">
        <div class="fg">
          <label>Max Attempts</label>
          <input id="c-att" type="number" value="6" min="1" max="20"/>
        </div>
        <div class="fg">
          <label>Opponent Username</label>
          <input id="c-opp" type="text" placeholder="their username"/>
        </div>
      </div>
      <!-- Loading state for button -->
      <button id="btn-create" class="btn btn-p btn-full" style="margin-top:6px">üöÄ Send Challenge</button>
      <hr class="div"/>
      <p style="font-size:.78rem;color:var(--dim);line-height:1.8">
        <strong style="color:var(--text)">How it works:</strong><br/>
        1. Enter your secret word &amp; attempt limit<br/>
        2. Enter opponent's username (they must be registered)<br/>
        3. They log in ‚Üí see your invite ‚Üí accept it<br/>
        4. Watch their guesses update live in real-time!
      </p>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAME ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="v-game" class="view">
    <div class="card" style="position:relative">
      <!-- End overlay -->
      <div id="end-ov">
        <div id="end-icon">üèÜ</div>
        <div id="end-title">Victory!</div>
        <div id="end-msg">You cracked the code!</div>
        <div id="end-word">‚Äî</div>
        <div id="end-winner">Winner: ‚Äî</div>
        <div class="brow" style="justify-content:center;margin-top:8px">
          <button id="btn-rematch"  class="btn btn-s">üîÑ Rematch</button>
          <button id="btn-back-end" class="btn btn-g">‚Üê Menu</button>
        </div>
      </div>
      <!-- Header -->
      <div class="ghdr">
        <div class="gmeta">
          <span id="gid-disp" class="gid">#----</span>
          <span id="gvs" class="gvs">‚Äî ‚öîÔ∏è ‚Äî</span>
        </div>
        <div style="display:flex;align-items:center;gap:9px">
          <span id="g-sbadge" class="sbadge s-waiting">‚è≥ Waiting</span>
          <button id="btn-back-game" class="btn btn-g">‚Üê Back</button>
        </div>
      </div>
      <!-- P1 word hint -->
      <div id="p1-hint" style="display:none"></div>
      <!-- Attempts + legend -->
      <div class="fb" style="margin-bottom:6px">
        <span id="g-att" class="gatt">Attempts: ‚Äî</span>
        <div class="legend" style="margin:0">
          <span><i class="ld ld-g"></i>Correct</span>
          <span><i class="ld ld-y"></i>Exists</span>
          <span><i class="ld ld-r"></i>Absent</span>
        </div>
      </div>
      <div id="guess-grid"></div>
      <div id="p1-wait"></div>
      <!-- P2 input -->
      <div class="irow" id="g-irow" style="display:none">
        <input id="g-inp" type="text" placeholder="Enter guess‚Ä¶"
          style="text-transform:uppercase;letter-spacing:.2em;font-family:var(--fh);text-align:center"/>
        <button id="btn-guess" class="btn btn-p">‚ö° Guess</button>
      </div>
      <div id="kb" class="kb-wrap"></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê OFFLINE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="v-offline" class="view">
    <div class="card">
      <div class="fb" style="margin-bottom:22px">
        <div class="logo" style="font-size:1.28rem;margin-bottom:0">Offline Play</div>
        <button id="back-offline" class="btn btn-g">‚Üê Back</button>
      </div>
      <div id="off-setup">
        <div class="stitle">Player 1 ‚Äî Set the Word</div>
        <div class="fg">
          <label>Secret Word</label>
          <input id="off-word" type="text" placeholder="Enter secret word‚Ä¶" maxlength="10"
            style="text-transform:uppercase;letter-spacing:.2em"/>
        </div>
        <div class="fg">
          <label>Attempts Allowed</label>
          <input id="off-att" type="number" value="6" min="1" max="20"/>
        </div>
        <button id="off-start" class="btn btn-p btn-full">üéÆ Start ‚Äî Pass to Player 2</button>
      </div>
      <div id="off-play" style="display:none">
        <div class="stitle">Player 2 ‚Äî Guess the Word</div>
        <div style="text-align:center;margin-bottom:5px">
          <span class="gatt" id="off-att-left">Attempts left: 6</span>
        </div>
        <p style="text-align:center;font-size:.78rem;color:var(--dim);margin-bottom:7px">
          Word has <strong id="off-wlen">?</strong> letters
        </p>
        <div class="legend">
          <span><i class="ld ld-g"></i>Right place</span>
          <span><i class="ld ld-y"></i>Wrong place</span>
          <span><i class="ld ld-r"></i>Not in word</span>
        </div>
        <div id="off-grid"></div>
        <div class="irow">
          <input id="off-inp" type="text" placeholder="Your guess‚Ä¶"
            style="flex:1;text-transform:
